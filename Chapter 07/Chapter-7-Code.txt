Installing Apache and Nginx:
apt-get install apache2 nginx

SAML Assertion example:
<saml:Assertion  xmlns:saml=“….”   
         …version information goes here…
           AssertionID=“….”
           IssueInstant=“….”>
        <saml:Issuer> www.acompany.com </saml:Issuer>
        <ds:Signature>  … XML Signature goes here …   </ds:Signature>
        <saml:Subject>
                <saml:NameIdentifier  ….>  uid=joe  </saml:NameIdentifier>
        </saml:Subject>
        <saml:Conditions  …. />
         … SAML statements go here …
</saml:Assertion>

Create a self-sign certificate:
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt

ssl-parameters.conf:
SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
SSLProtocol All -SSLv2 -SSLv3 -TLSv1 -TLSv1.1
SSLHonorCipherOrder On
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
SSLCompression off
SSLUseStapling on
SSLStaplingCache "shmcb:logs/stapling-cache(150000)"
SSLSessionTickets Off


default-ssl.conf:
<IfModule mod_ssl.c>
        <VirtualHost _default_:443>
                ServerAdmin your_email@email.com
                ServerName server_domain_or_IP
                DocumentRoot /var/www/html
                ErrorLog ${APACHE_LOG_DIR}/error.log
                CustomLog ${APACHE_LOG_DIR}/access.log combined
                SSLEngine on
                SSLCertificateFile      /etc/ssl/certs/selfsigned-generated.crt
                SSLCertificateKeyFile /etc/ssl/private/selfsigned-generated.key
                <FilesMatch "\.(cgi|shtml|phtml|php)$">
                                SSLOptions +StdEnvVars
                </FilesMatch>
                <Directory /usr/lib/cgi-bin>
                                SSLOptions +StdEnvVars
                </Directory>

        </VirtualHost>
</IfModule>

Sites-enable Nginx:
listen 443 ssl;
ssl on;
ssl_certificate <path-to-certificate>;
ssl_certificate_key <path-to-certificate-key>;

Restart Nginx Service:
service nginx restart

mpm_worker.conf parameters:
<IfModule mpm_worker_module>
ServerLimit 250
StartServers 10
MinSpareThreads 75
MaxSpareThreads 250
ThreadLimit 64
ThreadsPerChild 32
MaxRequestWorkers 8000
MaxConnectionsPerChild 10000
</IfModule>

chroot Nginx and Apache commands sequence:
mkdir -p $D/etc
mkdir -p $D/dev
mkdir -p $D/var
mkdir -p $D/usr
mkdir -p $D/usr/local/nginx
mkdir -p $D/tmp
chmod 1777 $D/tmp
mkdir -p $D/var/tmp
chmod 1777 $D/var/tmp
mkdir -p $D/lib64
ls -l /dev/{null,random,urandom}
/bin/mknod -m 0666 $D/dev/null c 1 3
/bin/mknod -m 0666 $D/dev/random c 1 8
/bin/mknod -m 0444 $D/dev/urandom c 1 9
cp -farv /usr/local/nginx/* $D/usr/local/nginx
ldd /usr/local/nginx/sbin/nginx
cp /lib64/libsepol.so.1 $D/lib64
n2chroot /usr/local/nginx/sbin/nginx
cp -fv /lib64/* $D/lib64
cp -fv /etc/{group,prelink.cache,services,adjtime,shells,gshadow,shadow,hosts.deny,localtime,nsswitch.conf,nscd.conf,prelink.conf,protocols,hosts,passwd,ld.so.cache,ld.so.conf,resolv.conf,host.conf} $D/etc
cp -avr /etc/{ld.so.conf.d,prelink.conf.d} $D/etc
ln -s /var/www/var/run/apache2.pid /var/run/apache2.pid
service nginx stop
/usr/sbin/chroot /nginx /usr/local/nginx/sbin/nginx -t
/usr/sbin/chroot /nginx /usr/local/nginx/sbin/nginx
cp -a /etc/resolv.conf /var/chroot/etc/
cp -a /etc/hosts /var/chroot/etc/
cp -a /etc/mime.types /var/chroot/etc/
cp -a /usr/share/zoneinfo/America/Sao_Paulo /var/chroot/usr/share/zoneinfo/America
cp -a /etc/adjtime /var/chroot/etc/
chroot /var/chroot apt-get update
chroot /var/chroot apt-get install apache2 
chroot /var/chroot service apache2 start