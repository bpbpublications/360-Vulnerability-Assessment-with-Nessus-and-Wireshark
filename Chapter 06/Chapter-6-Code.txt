Installing Freeradius on Debian and Red Hat systems:
apt-get install freeradius freeradius-utils freeradius-ldap
yum install freeradius freeradius-utils freeradius-ldap

Installing Samba and Kerberus on Debian and Red Hat Systems:
apt-get install samba krb5-kdc
yum install samba krb5kdc

smb.conf content file:

# File begin
[global]
        kerberos method = secrets and keytab
        realm = fflore.local
        security = ADS
        template shell = /bin/bash
        winbind enum groups = Yes
        winbind enum users = Yes
        winbind separator = +
        workgroup = fflore
        winbind use default domain= true
        idmap config * : rangesize = 1000000
        idmap config * : range = 1000000-19999999
        idmap config * : backend = autorid

[logging]
    default = FILE:/var/log/krb5libs.log
    kdc = FILE:/var/log/krb5kdc.log
    admin_server = FILE:/var/log/kadmind.log

[libdefaults]
    default_realm=FFLORE.LOCAL
    dns_lookup_realm = true
    dns_lookup_kdc = true
    ticket_lifetime = 24h
    renew_lifetime = 7d
    forwardable = yes
    rdns = false
    pkinit_anchors = /etc/pki/tls/certs/ca-bundle.crt
    spake_preauth_groups = edwards25519
    default_ccache_name = KEYRING:persistent:%{uid}

# End of file


Join Linux machine in Active Directory/Samba Domain:
net ads join -u administrator

nsswitch.conf file configuration:
passwd:         files systemd winbind
group:          files systemd winbind


Commands to check users and groups in an Active Directory/Samba domain:
wbinfo –u
wbinfo -g


Freeradius clients.conf:
#
client <Access_Point_AP_ADDRESS> {
        secret          = <PASSWORD>
        shortname       = Access-Point
}
#


Freeradius mydefalt configuration file snippet:
authorize {
    preprocess
    mschap
    suffix
    eap
    files
}
authenticate {
    Auth-Type MS-CHAP {
        mschap
    }
    eap
}

Freeradius mschap configuration file snippet:
mschap {
        use_mppe = yes
        with_ntdomain_hack = yes
        ntlm_auth = "/usr/bin/ntlm_auth --request-nt-key –domain=FFLORE.LOCAL –require-membership-of=FFLORE.local//WIFIA --username=%{%{Stripped-User-Name}:-%{%{User-Name}:-None}} --challenge=%{%{mschap:Challenge}:-00} --nt-response=%{%{mschap:NT-Response}:-00}"
}

Debian and RedHat start radius service:
freeradiusd -X
radiusd -X
systemctl start freeradius.service

Freeradius mydefalt configuration file snippet to ldap group authorization:
post-auth {
if (Ldap-Group == "WIFIA") {
        update reply {
                Reply-Message := "Authorize"
                Tunnel-Type = 13,
                Tunnel-Medium-Type = 6,
                Tunnel-Private-Group-Id = "102"
    }
}




